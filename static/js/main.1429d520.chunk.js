(this["webpackJsonpmy-qs"]=this["webpackJsonpmy-qs"]||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(9),i=n.n(r),a=n(28),c=n.n(a),s=(n(37),n(12)),l=(n(38),n(26)),o=n(0),j=n.n(o),b=n(14),d=n(3),u=n(31),x=n(15),O=n(22),p=n(13),h=n(29),m=Object(h.a)({apiKey:"AIzaSyBF25OZgwRM4sJomPY03QNkEndvXF7FMdI",authDomain:"myqs-1ab0a.firebaseapp.com",databaseURL:"https://myqs-1ab0a-default-rtdb.europe-west1.firebasedatabase.app",projectId:"myqs-1ab0a",storageBucket:"myqs-1ab0a.appspot.com",messagingSenderId:"405974773090",appId:"1:405974773090:web:a638f39dc508d46e3ad03b"}),v=Object(p.a)(m),f=Object(x.b)(),g=n(30),y=n(6),w=function(){return Object(y.jsx)("div",{style:{height:"calc(100vh - 100px)",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(y.jsx)("p",{children:"Initialisation de l'Application..."})})},I=function(){Object(x.i)(f)},S=function(){var e=Object(O.a)(f),t=Object(s.a)(e,3),n=t[0],r=(t[1],t[2],null===n||void 0===n?void 0:n.uid),i=Object(g.a)(Object(p.h)(v,"users/".concat(r))),a=Object(s.a)(i,3),c=a[0],o=void 0===c?[]:c,x=a[1],h=(a[2],function(){var e=Object(d.a)(j.a.mark((function e(t){var n,i,a,c,s,l,d,u,x,O;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=t.target.date.value,i=t.target.diet.value,a=t.target.meal.value,s={date:n,diet:i,meal:a},l=function(e){return e.date===n&&e.meal===a},d=(c=o).filter(l),u=c.findIndex(l),x=d.length>0,O=Object(b.a)(c),x&&O.splice(u,1),O=[].concat(Object(b.a)(O),[s]),localStorage.setItem("diet",JSON.stringify(O)),j=O,Object(p.i)(Object(p.h)(v,"users/".concat(r)),j);case 15:case"end":return e.stop()}var j}),e)})));return function(t){return e.apply(this,arguments)}}()),m={border:"solid 1px black",height:"100px",borderRadius:"5px",padding:"5px",width:"100px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},S=Object(l.a)(Object(l.a)({},m),{},{width:"65px",height:"65px"});return x?Object(y.jsx)(w,{}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{style:{width:"70%",height:"300px",margin:"0 auto 30px"},children:0===o.length?Object(y.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:Object(y.jsx)("p",{children:"Remplissez le formulaire ;)"})}):Object(y.jsx)(u.PieChart,{data:function(){var e=o,t=e.filter((function(e){return"vegan"===e.diet})),n=e.filter((function(e){return"vegetarian"===e.diet})),r=e.filter((function(e){return"omnivore"===e.diet}));return[{title:"vegan",value:t.length,color:"#75DBCD"},{title:"v\xe9g\xe9tarien",value:n.length,color:"#FAA381"},{title:"omnivore",value:r.length,color:"#DCDBA8"}]}(),label:function(e){var t=e.dataEntry;return t.value>0?"".concat(t.title," : ").concat(Math.round(t.percentage),"%"):null},labelStyle:{fontSize:"6px"}})}),Object(y.jsxs)("form",{onSubmit:h,children:[Object(y.jsxs)("label",{children:["Date"," ",Object(y.jsx)("input",{type:"date",name:"date",id:"date",required:!0})]}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"40px"},children:[Object(y.jsxs)("label",{style:S,children:["Matin ",Object(y.jsx)("br",{}),Object(y.jsx)("input",{type:"radio",name:"meal",value:"breakfast",required:!0})]}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsxs)("label",{style:S,children:["Midi ",Object(y.jsx)("br",{}),Object(y.jsx)("input",{type:"radio",name:"meal",value:"lunch"})]}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsxs)("label",{style:S,children:["Go\xfbter ",Object(y.jsx)("br",{}),Object(y.jsx)("input",{type:"radio",name:"meal",value:"snack"})]}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsxs)("label",{style:S,children:["Soir ",Object(y.jsx)("br",{}),Object(y.jsx)("input",{type:"radio",name:"meal",value:"dinner"})]})]}),Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(y.jsxs)("label",{style:m,children:["V\xe9g\xe9tarien ",Object(y.jsx)("br",{}),Object(y.jsx)("input",{type:"radio",name:"diet",value:"vegetarian",required:!0})]}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsxs)("label",{style:m,children:["V\xe9gan ",Object(y.jsx)("br",{}),Object(y.jsx)("input",{type:"radio",name:"diet",value:"vegan"})]}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsxs)("label",{style:m,children:["Omnivore ",Object(y.jsx)("br",{}),Object(y.jsx)("input",{type:"radio",name:"diet",value:"omnivore"})]})]}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)("button",{type:"submit",style:{padding:"10px 15px"},children:"Enregistrer"})]}),Object(y.jsxs)("div",{children:[Object(y.jsxs)("p",{children:["Nombre de jours : ",function(){var e=o.reduce((function(e,t){return e.push(t.date),e}),[]);return e.filter((function(t,n){return e.indexOf(t)===n})).length}()]}),Object(y.jsxs)("p",{children:["Date la plus proche renseign\xe9e : ",new Date(function(){var e=new Date,t=o.reduce((function(e,t){return e.push(t.date),e}),[]);return Object(b.a)(t).sort((function(t,n){return Math.abs(new Date(t)-e)-Math.abs(new Date(n)-e)}))[0]}()).toLocaleDateString("fr")]})]}),Object(y.jsx)("hr",{}),n&&Object(y.jsxs)("div",{children:[Object(y.jsxs)("p",{children:["Utilisateur: ",n.email]}),Object(y.jsx)("button",{onClick:I,children:"Se d\xe9connecter"})]}),Object(y.jsx)("hr",{}),Object(y.jsx)("br",{})]})},C=function(){var e=Object(O.a)(f),t=Object(s.a)(e,1)[0];return Object(y.jsx)("div",{style:{height:"calc(100vh - 100px)",display:"flex",alignItems:"center",justifyContent:"center"},children:t?Object(y.jsx)("div",{children:Object(y.jsx)("p",{children:"Initialising User..."})}):Object(y.jsxs)("form",{onSubmit:function(e){var t,n,r;e.preventDefault(),function(e){var t={url:window.location.href,handleCodeInApp:!0};Object(x.f)(f,e,t).then((function(){window.localStorage.setItem("emailForSignIn",e),alert("Vous allez recevoir un mail pour vous connecter \ud83d\udc8c")})).catch((function(e){alert("Une erreur est survenue, veuillez recommencer \ud83d\ude1c"),console.error("errorCode",null===e||void 0===e?void 0:e.code),console.error("errorMessage",null===e||void 0===e?void 0:e.message)}))}(null===e||void 0===e||null===(t=e.target)||void 0===t||null===(n=t.elements)||void 0===n||null===(r=n.email)||void 0===r?void 0:r.value)},children:[Object(y.jsxs)("label",{children:["Renseignez votre email",Object(y.jsx)("input",{type:"email",name:"email",id:"email",required:!0,style:{marginLeft:"10px"}})]}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)("button",{children:"Recevoir le lien de connexion"})]})})};var D=function(){var e=Object(O.a)(f),t=Object(s.a)(e,2),n=t[0],r=t[1];if(Object(x.c)(f,window.location.href)){var i=window.localStorage.getItem("emailForSignIn");i||(i=window.prompt("Entrez votre email pour confirmation")),Object(x.h)(f,i,window.location.href).then((function(e){window.localStorage.removeItem("emailForSignIn"),window.location.search=""})).catch((function(e){console.error("errorCode",e.code),console.error("errorMessage",e.message)}))}return r?Object(y.jsxs)("div",{className:"App",style:{maxWidth:"375px",margin:"0 auto",padding:"0 10px"},children:[Object(y.jsx)("header",{style:{margin:"20px 0"},children:"My QS"}),Object(y.jsx)(w,{})]}):Object(y.jsxs)("div",{className:"App",style:{maxWidth:"375px",margin:"0 auto",padding:"0 10px"},children:[Object(y.jsx)("header",{style:{margin:"20px 0"},children:"My QS"}),n?Object(y.jsx)(S,{}):Object(y.jsx)(C,{})]})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,44)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),a(e),c(e)}))};c.a.render(Object(y.jsx)(i.a.StrictMode,{children:Object(y.jsx)(D,{})}),document.getElementById("root")),F()}},[[43,1,2]]]);
//# sourceMappingURL=main.1429d520.chunk.js.map