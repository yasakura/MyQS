(this["webpackJsonpmy-qs"]=this["webpackJsonpmy-qs"]||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(9),a=n.n(r),i=n(28),c=n.n(i),s=(n(38),n(11)),l=(n(39),n(16)),o=n(22),j=n(30),b=n(13),d=Object(j.a)({apiKey:"AIzaSyBF25OZgwRM4sJomPY03QNkEndvXF7FMdI",authDomain:"myqs-1ab0a.firebaseapp.com",databaseURL:"https://myqs-1ab0a-default-rtdb.europe-west1.firebasedatabase.app",projectId:"myqs-1ab0a",storageBucket:"myqs-1ab0a.appspot.com",messagingSenderId:"405974773090",appId:"1:405974773090:web:a638f39dc508d46e3ad03b"}),u=Object(b.a)(d),x=Object(l.b)(),p=function(){console.log("logout"),Object(l.i)(x)},O=n(3),h=n(0),m=n.n(h),f=function(e){alert("Une erreur est survenue, recommence \ud83d\ude1c"),console.error("errorCode",null===e||void 0===e?void 0:e.code),console.error("errorMessage",null===e||void 0===e?void 0:e.message)},v=n(6),g=function(){return Object(v.jsx)("div",{style:{height:"calc(100vh - 200px)",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(v.jsx)("p",{children:"Initialisation de l'Application..."})})},y=function(){var e=Object(o.a)(x),t=Object(s.a)(e,1)[0],n=Object(r.useState)(!1),a=Object(s.a)(n,2),i=a[0],c=a[1],j=function(){var e=Object(O.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),n={url:window.location.href,handleCodeInApp:!0},e.next=4,Object(l.f)(x,t,n).then((function(){window.localStorage.setItem("emailForSignIn",t),alert("Tu vas recevoir un mail pour te connecter \ud83d\udc8c"),c(!1)})).catch(f);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)("div",{style:{height:"calc(100vh - 200px)",display:"flex",alignItems:"center",justifyContent:"center"},children:t?Object(v.jsx)(g,{}):Object(v.jsxs)("form",{onSubmit:function(e){var t,n,r;e.preventDefault(),console.log("submit form");var a=null===e||void 0===e||null===(t=e.target)||void 0===t||null===(n=t.elements)||void 0===n||null===(r=n.email)||void 0===r?void 0:r.value;j(a)},children:[Object(v.jsxs)("label",{children:["Renseigne ton email",Object(v.jsx)("input",{type:"email",name:"email",id:"email",required:!0,style:{marginLeft:"10px"}})]}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("button",{type:"submit",disabled:i,children:i?"Patiente un peu \ud83d\ude80":"Recevoir le lien de connexion"})]})})},w=n(26),I=n(14),S=n(32),D=n(31),C=function(){var e=Object(o.a)(x),t=Object(s.a)(e,1)[0],n=null===t||void 0===t?void 0:t.uid,r=Object(D.a)(Object(b.h)(u,"users/".concat(n))),a=Object(s.a)(r,2),i=a[0],c=a[1],l=i||[],j=function(){var e=Object(O.a)(m.a.mark((function e(t){var r,a,i,c,s,o,j,d,x,p;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),r=t.target.date.value,a=t.target.diet.value,i=t.target.meal.value,s={date:r,diet:a,meal:i},o=function(){return a.date===r&&a.meal===i},j=(c=l).filter(o),d=c.findIndex(o),x=j.length>0,p=Object(I.a)(c),x&&p.splice(d,1),p=[].concat(Object(I.a)(p),[s]),localStorage.setItem("diet",JSON.stringify(p)),O=p,Object(b.i)(Object(b.h)(u,"users/".concat(n)),O);case 15:case"end":return e.stop()}var O}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=new Date,t=l.reduce((function(e,t){return e.push(t.date),e}),[]);return Object(I.a)(t).sort((function(t,n){return Math.abs(new Date(t)-e)-Math.abs(new Date(n)-e)}))[0]},h={border:"solid 1px black",height:"100px",borderRadius:"5px",padding:"5px",width:"100px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},f=Object(w.a)(Object(w.a)({},h),{},{width:"65px",height:"65px"}),y=d()?new Date(d()).toLocaleDateString("fr"):"Aucune \ud83e\udd37\u200d";return c?Object(v.jsx)(g,{}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{style:{width:"70%",height:"300px",margin:"0 auto 30px"},children:0===l.length?Object(v.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:Object(v.jsx)("p",{children:"Remplis le formulaire \ud83d\ude09"})}):Object(v.jsx)(S.PieChart,{data:function(){var e=l,t=e.filter((function(e){return"vegan"===e.diet})),n=e.filter((function(e){return"vegetarian"===e.diet})),r=e.filter((function(e){return"omnivore"===e.diet}));return[{title:"vegan",value:t.length,color:"#75DBCD"},{title:"v\xe9g\xe9tarien",value:n.length,color:"#FAA381"},{title:"omnivore",value:r.length,color:"#DCDBA8"}]}(),label:function(e){var t=e.dataEntry;return t.value>0?"".concat(t.title," : ").concat(Math.round(t.percentage),"%"):null},labelStyle:{fontSize:"6px"}})}),Object(v.jsxs)("form",{onSubmit:j,children:[Object(v.jsxs)("label",{children:["Date",Object(v.jsx)("input",{type:"date",name:"date",id:"date",required:!0})]}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"40px"},children:[Object(v.jsxs)("label",{style:f,children:["Matin ",Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"radio",name:"meal",value:"breakfast",required:!0})]}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsxs)("label",{style:f,children:["Midi ",Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"radio",name:"meal",value:"lunch"})]}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsxs)("label",{style:f,children:["Go\xfbter ",Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"radio",name:"meal",value:"snack"})]}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsxs)("label",{style:f,children:["Soir ",Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"radio",name:"meal",value:"dinner"})]})]}),Object(v.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[Object(v.jsxs)("label",{style:h,children:["V\xe9g\xe9tarien ",Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"radio",name:"diet",value:"vegetarian",required:!0})]}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsxs)("label",{style:h,children:["V\xe9gan ",Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"radio",name:"diet",value:"vegan"})]}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsxs)("label",{style:h,children:["Omnivore ",Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"radio",name:"diet",value:"omnivore"})]})]}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("button",{type:"submit",style:{padding:"10px 15px"},children:"Enregistrer"})]}),Object(v.jsxs)("div",{children:[Object(v.jsxs)("p",{children:["Nombre de jours : ",function(){var e=l.reduce((function(e,t){return e.push(t.date),e}),[]);return e.filter((function(t,n){return e.indexOf(t)===n})).length}()]}),Object(v.jsxs)("p",{children:["Date la plus proche renseign\xe9e : ",y]})]}),Object(v.jsx)("hr",{}),t&&Object(v.jsxs)("div",{children:[Object(v.jsxs)("p",{children:["Utilisateur: ",t.email]}),Object(v.jsx)("button",{onClick:p,type:"submit",children:"Se d\xe9connecter"})]}),Object(v.jsx)("hr",{}),Object(v.jsx)("br",{})]})};var F=function(){var e=Object(o.a)(x),t=Object(s.a)(e,2),n=t[0],r=t[1];if(Object(l.c)(x,window.location.href)){var a=window.localStorage.getItem("emailForSignIn");a||(a=window.prompt("Entrez votre email pour confirmation")),Object(l.h)(x,a,window.location.href).then((function(){window.localStorage.removeItem("emailForSignIn"),window.location.search=""})).catch(f)}return r?Object(v.jsxs)("div",{className:"App",style:{maxWidth:"375px",margin:"0 auto",padding:"0 10px"},children:[Object(v.jsx)("header",{style:{margin:"20px 0"},children:"My QS"}),Object(v.jsx)(g,{})]}):Object(v.jsxs)("div",{className:"App",style:{maxWidth:"375px",margin:"0 auto",padding:"0 10px"},children:[Object(v.jsx)("header",{style:{margin:"20px 0"},children:"My QS"}),n?Object(v.jsx)(C,{}):Object(v.jsx)(y,{})]})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,45)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};c.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(F,{})}),document.getElementById("root")),M()}},[[44,1,2]]]);
//# sourceMappingURL=main.541cfe3b.chunk.js.map