{"version":3,"sources":["utils/error.js","libs/firebase.js","services/auth.js","components/Login.js","components/SnackbarStack.js","services/diets.js","components/DietForm.js","components/Pie.js","components/MyQS.js","components/Loading.js","hoc/GlobalLoader.js","App.js","reportWebVitals.js","index.js"],"names":["handleError","error","alert","console","code","message","app","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","database","getDatabase","auth","getAuth","logOut","signOut","signIn","a","isSignInWithEmailLink","window","location","href","email","localStorage","getItem","prompt","signInWithEmailLink","then","removeItem","search","catch","useRetrieveUser","useAuthState","user","loadingUser","Login","useState","isButtonDisabled","setIsButtonDisabled","login","actionCodeSettings","url","handleCodeInApp","Promise","resolve","sendSignInLinkToEmail","sendSignIn","setItem","style","height","display","alignItems","justifyContent","onSubmit","event","preventDefault","target","elements","value","type","name","id","required","marginLeft","Button","variant","disabled","SnackbarStack","snackPack","setSnackPack","isSnackbarShowed","setSnackbarShowed","React","undefined","messageInfo","setMessageInfo","useEffect","length","prev","slice","Snackbar","TransitionProps","onExited","autoHideDuration","onClose","reason","open","Alert","severity","key","useRetrieveDiets","userId","uid","useObjectVal","ref","diets","loadingDiets","DietForm","retrieveUser","retrieveDiets","handleSuccessMessage","Date","getTime","labelStyle","border","borderRadius","padding","width","margin","lunchLabelStyle","date","diet","meal","data","set","sendDiets","rawDiets","dietEntry","dietFilter","item","currentDietInSavedDiet","filter","currentDietFirstIndexInSavedDiet","findIndex","splice","composeUserDiet","FormControl","component","sx","marginBottom","RadioGroup","row","defaultValue","marginTop","FormControlLabel","control","Radio","size","label","labelPlacement","Pie","fontSize","MyQS","getNearestDate","today","dates","reduce","previousValue","currentValue","push","sort","b","Math","abs","nearestDate","toLocaleDateString","savedDiet","veganDiet","vegetarianDiet","omnivoreDiet","title","color","getData","dataEntry","round","percentage","dietDates","index","indexOf","getDietNumber","onClick","Loading","className","maxWidth","Box","GlobalLoader","children","isLoading","setLoading","shouldShowLoader","setTimeout","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c87a7f4f.chunk.js","sourcesContent":["const handleError = (error) => {\n  alert(\"Une erreur est survenue, recommence 😜\");\n  console.error(\"errorCode\", error?.code);\n  console.error(\"errorMessage\", error?.message);\n};\n\nexport default handleError;\n","import { initializeApp } from \"firebase/app\";\nimport { getDatabase } from \"firebase/database\";\nimport { getAuth, signOut } from \"firebase/auth\";\n\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_API_KEY,\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\n  projectId: process.env.REACT_APP_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_APP_ID,\n};\n\nconst app = initializeApp(firebaseConfig);\n\nexport const database = getDatabase(app);\n\nexport const auth = getAuth();\n\nexport const logout = () => {\n  signOut(auth);\n};\n","import {\n  isSignInWithEmailLink,\n  sendSignInLinkToEmail,\n  signInWithEmailLink,\n} from \"firebase/auth\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { auth, logout } from \"../libs/firebase\";\nimport handleError from \"../utils/error\";\n\nconst logOut = () => logout();\n\nconst sendSignIn = (email) => {\n  const actionCodeSettings = {\n    url: window.location.href,\n    handleCodeInApp: true,\n  };\n  return Promise.resolve(\n    sendSignInLinkToEmail(auth, email, actionCodeSettings)\n  );\n};\n\nconst signIn = async () => {\n  if (isSignInWithEmailLink(auth, window.location.href)) {\n    let email = window.localStorage.getItem(\"emailForSignIn\");\n    if (!email) {\n      email = window.prompt(\"Entrez votre email pour confirmation\");\n    }\n\n    await signInWithEmailLink(auth, email, window.location.href)\n      .then(() => {\n        window.localStorage.removeItem(\"emailForSignIn\");\n        window.location.search = \"\";\n      })\n      .catch((error) => {\n        if (error?.code === \"auth/invalid-action-code\") return;\n        handleError(error);\n      });\n  }\n};\n\nconst useRetrieveUser = () => {\n  const [user, loadingUser] = useAuthState(auth);\n  return {user, loadingUser};\n};\n\nexport { sendSignIn, logOut, signIn, useRetrieveUser as retrieveUser };\n","import React, { useState } from \"react\";\nimport Button from \"@mui/material/Button\";\nimport handleError from \"../utils/error\";\nimport { sendSignIn } from \"../services/auth\";\n\nconst Login = () => {\n  const [isButtonDisabled, setIsButtonDisabled] = useState(false);\n\n  const login = (email) => {\n    setIsButtonDisabled(true);\n\n    sendSignIn(email)\n      .then(() => {\n        window.localStorage.setItem(\"emailForSignIn\", email);\n        alert(\"Tu vas recevoir un mail pour te connecter 💌\");\n        setIsButtonDisabled(false);\n      })\n      .catch(handleError);\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    const email = event?.target?.elements?.email?.value;\n    login(email);\n  };\n\n  return (\n    <div\n      style={{\n        height: \"calc(100vh - 200px)\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n      }}\n    >\n      <form onSubmit={handleSubmit}>\n        <label>\n          Renseigne ton email\n          <input\n            type=\"email\"\n            name=\"email\"\n            id=\"email\"\n            required\n            style={{ marginLeft: \"10px\" }}\n          />\n        </label>\n        <br />\n        <br />\n        <Button type=\"submit\" variant=\"contained\" disabled={isButtonDisabled}>\n          {!isButtonDisabled\n            ? \"Recevoir le lien de connexion\"\n            : \"Patiente un peu 🚀\"}\n        </Button>\n      </form>\n    </div>\n  );\n};\n\nexport default Login;\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Alert from \"@mui/material/Alert\";\nimport Snackbar from \"@mui/material/Snackbar\";\n\nconst SUCCESS_MESSAGE_LENGTH_DURATION = 3000;\n\nconst SnackbarStack = ({ snackPack, setSnackPack }) => {\n  const [isSnackbarShowed, setSnackbarShowed] = useState(false);\n  const [messageInfo, setMessageInfo] = React.useState(undefined);\n\n  const handleClose = (event, reason) => {\n    if (reason === \"clickaway\") {\n      return;\n    }\n\n    setSnackbarShowed(false);\n  };\n\n  const handleExited = () => {\n    setMessageInfo(undefined);\n  };\n\n  React.useEffect(() => {\n    if (snackPack.length && !messageInfo) {\n      setMessageInfo({ ...snackPack[0] });\n      setSnackPack((prev) => prev.slice(1));\n      setSnackbarShowed(true);\n    } else if (snackPack.length && messageInfo && isSnackbarShowed) {\n      setSnackbarShowed(false);\n    }\n  }, [snackPack, setSnackPack, messageInfo, isSnackbarShowed]);\n\n  return (\n    <Snackbar\n      TransitionProps={{ onExited: handleExited }}\n      autoHideDuration={SUCCESS_MESSAGE_LENGTH_DURATION}\n      key={messageInfo?.key ?? undefined}\n      onClose={handleClose}\n      open={isSnackbarShowed}\n    >\n      <Alert severity=\"success\">Repas enregistré</Alert>\n    </Snackbar>\n  );\n};\n\nSnackbarStack.propTypes = {\n  snackPack: PropTypes.arrayOf(\n    PropTypes.shape({\n      message: PropTypes.number,\n      key: PropTypes.number,\n    })\n  ).isRequired,\n  setSnackPack: PropTypes.func.isRequired,\n};\n\nexport default SnackbarStack;\n","import { useAuthState } from \"react-firebase-hooks/auth\";\nimport { useObjectVal } from \"react-firebase-hooks/database\";\nimport { ref, set } from \"firebase/database\";\nimport { auth, database } from \"../libs/firebase\";\n\nconst useRetrieveDiets = () => {\n  const [user] = useAuthState(auth);\n  const userId = user?.uid;\n  const [diets, loadingDiets] = useObjectVal(ref(database, `users/${userId}`));\n\n  return { diets: diets || [], loadingDiets };\n};\n\nconst useSendDiets = (user, data) =>\n  set(ref(database, `users/${user?.uid}`), data);\n\nexport { useRetrieveDiets as retrieveDiets, useSendDiets as sendDiets };\n","import React from \"react\";\nimport Button from \"@mui/material/Button\";\nimport {\n  FormControl,\n  FormControlLabel,\n  Radio,\n  RadioGroup,\n} from \"@mui/material\";\nimport SnackbarStack from \"./SnackbarStack\";\nimport { retrieveDiets, sendDiets } from \"../services/diets\";\nimport { retrieveUser } from \"../services/auth\";\n\nconst DietForm = () => {\n  const [snackPack, setSnackPack] = React.useState([]);\n  const { user } = retrieveUser();\n  const { diets } = retrieveDiets();\n\n  const composeUserDiet = (date, diet, meal) => {\n    const rawDiets = diets;\n    const dietEntry = { date, diet, meal };\n    const dietFilter = (item) =>\n      dietEntry.date === item.date && dietEntry.meal === item.meal;\n    const currentDietInSavedDiet = rawDiets.filter(dietFilter);\n    const currentDietFirstIndexInSavedDiet = rawDiets.findIndex(dietFilter);\n    const isCurrentDietInSavedDiet = currentDietInSavedDiet.length > 0;\n    if (isCurrentDietInSavedDiet) {\n      rawDiets.splice(\n        currentDietFirstIndexInSavedDiet,\n        currentDietInSavedDiet.length\n      );\n    }\n\n    return [...rawDiets, dietEntry];\n  };\n\n  const handleSuccessMessage = () => {\n    setSnackPack((prev) => [...prev, { key: new Date().getTime() }]);\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    const date = event.target.date.value;\n    const diet = event.target.diet.value;\n    const meal = event.target.meal.value;\n\n    sendDiets(user, composeUserDiet(date, diet, meal)).then(\n      handleSuccessMessage\n    );\n  };\n\n  const labelStyle = {\n    border: \"solid 1px black\",\n    height: \"100px\",\n    borderRadius: \"5px\",\n    padding: \"5px\",\n    width: \"100px\",\n    // display: \"flex\",\n    // alignItems: \"center\",\n    // justifyContent: \"center\",\n    // flexDirection: \"column\",\n    margin: 0,\n  };\n\n  const lunchLabelStyle = {\n    ...labelStyle,\n    width: \"65px\",\n    height: \"65px\",\n  };\n\n  return (\n    <>\n      <form onSubmit={handleSubmit}>\n        <FormControl component=\"fieldset\" sx={{ width: \"100%\" }}>\n          <label>\n            Date\n            <input type=\"date\" name=\"date\" id=\"date\" required />\n          </label>\n          <br />\n          <br />\n          <br />\n          <div\n            style={{\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"space-between\",\n              marginBottom: \"40px\",\n            }}\n          >\n            <RadioGroup\n              row\n              aria-label=\"position\"\n              name=\"meal\"\n              defaultValue=\"breakfast\"\n              sx={{\n                justifyContent: \"space-between\",\n                marginTop: \"40px\",\n                width: \"100%\",\n              }}\n            >\n              <FormControlLabel\n                value=\"breakfast\"\n                control={<Radio size=\"small\" />}\n                label=\"Matin\"\n                labelPlacement=\"top\"\n                sx={lunchLabelStyle}\n              />\n              {/* <label style={lunchLabelStyle}> */}\n              {/*   Matin <br /> */}\n              {/*   <input type=\"radio\" name=\"meal\" value=\"breakfast\" required /> */}\n              {/* </label> */}\n              <FormControlLabel\n                value=\"lunch\"\n                control={<Radio size=\"small\" />}\n                label=\"Midi\"\n                labelPlacement=\"top\"\n                sx={lunchLabelStyle}\n              />\n              {/* <label style={lunchLabelStyle}> */}\n              {/*   Midi <br /> */}\n              {/*   <input type=\"radio\" name=\"meal\" value=\"lunch\" /> */}\n              {/* </label> */}\n              <FormControlLabel\n                value=\"snack\"\n                control={<Radio size=\"small\" />}\n                label=\"Goûter\"\n                labelPlacement=\"start\"\n                sx={lunchLabelStyle}\n              />\n              {/* <label style={lunchLabelStyle}> */}\n              {/*   Goûter <br /> */}\n              {/*   <input type=\"radio\" name=\"meal\" value=\"snack\" /> */}\n              {/* </label> */}\n              <FormControlLabel\n                value=\"dinner\"\n                control={<Radio size=\"small\" />}\n                label=\"Soir\"\n                labelPlacement=\"top\"\n                sx={lunchLabelStyle}\n              />\n              {/*  <label style={lunchLabelStyle}> */}\n              {/*   Soir <br /> */}\n              {/*   <input type=\"radio\" name=\"meal\" value=\"dinner\" /> */}\n              {/* </label> */}\n            </RadioGroup>\n          </div>\n\n          <div\n            style={{\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            <label style={labelStyle}>\n              Végétarien <br />\n              <input type=\"radio\" name=\"diet\" value=\"vegetarian\" required />\n            </label>\n            <br />\n            <br />\n            <label style={labelStyle}>\n              Végan <br />\n              <input type=\"radio\" name=\"diet\" value=\"vegan\" />\n            </label>\n            <br />\n            <br />\n            <label style={labelStyle}>\n              Omnivore <br />\n              <input type=\"radio\" name=\"diet\" value=\"omnivore\" />\n            </label>\n          </div>\n\n          <br />\n          <br />\n          <Button type=\"submit\" variant=\"contained\">\n            Enregistrer\n          </Button>\n        </FormControl>\n      </form>\n\n      <SnackbarStack snackPack={snackPack} setSnackPack={setSnackPack} />\n    </>\n  );\n};\n\nexport default DietForm;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { PieChart } from \"react-minimal-pie-chart\";\n\nconst Pie = ({ diets, data, label }) => (\n  <div style={{ width: \"70%\", height: \"300px\", margin: \"0 auto 30px\" }}>\n    {diets.length === 0 ? (\n      <div\n        style={{\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          height: \"100%\",\n        }}\n      >\n        <p>Remplis le formulaire 😉</p>\n      </div>\n    ) : (\n      <PieChart data={data} label={label} labelStyle={{ fontSize: \"6px\" }} />\n    )}\n  </div>\n);\n\nPie.propTypes = {\n  diets: PropTypes.arrayOf(\n    PropTypes.shape({\n      title: PropTypes.string,\n      value: PropTypes.number,\n      color: PropTypes.string,\n    })\n  ).isRequired,\n  data: PropTypes.arrayOf(\n    PropTypes.shape({\n      date: PropTypes.string,\n      diet: PropTypes.string,\n      meal: PropTypes.string,\n    })\n  ).isRequired,\n  label: PropTypes.func.isRequired,\n};\n\nexport default Pie;\n","import React from \"react\";\nimport Button from \"@mui/material/Button\";\nimport DietForm from \"./DietForm\";\nimport Pie from \"./Pie\";\nimport { logOut, retrieveUser } from \"../services/auth\";\nimport { retrieveDiets } from \"../services/diets\";\n\nconst MyQS = () => {\n  const { user } = retrieveUser();\n  const { diets } = retrieveDiets();\n\n  const getDietNumber = () => {\n    const dietDates = diets.reduce((previousValue, currentValue) => {\n      previousValue.push(currentValue.date);\n      return previousValue;\n    }, []);\n\n    const dietDatesWithoutDuplicateDates = dietDates.filter(\n      (item, index) => dietDates.indexOf(item) === index\n    );\n\n    return dietDatesWithoutDuplicateDates.length;\n  };\n\n  const getData = () => {\n    const savedDiet = diets;\n    const veganDiet = savedDiet.filter((diet) => diet.diet === \"vegan\");\n    const vegetarianDiet = savedDiet.filter(\n      (diet) => diet.diet === \"vegetarian\"\n    );\n    const omnivoreDiet = savedDiet.filter((diet) => diet.diet === \"omnivore\");\n\n    return [\n      { title: \"vegan\", value: veganDiet.length, color: \"#75DBCD\" },\n      { title: \"végétarien\", value: vegetarianDiet.length, color: \"#FAA381\" },\n      { title: \"omnivore\", value: omnivoreDiet.length, color: \"#DCDBA8\" },\n    ];\n  };\n\n  const getDatesFromSavedDiet = () =>\n    diets.reduce((previousValue, currentValue) => {\n      previousValue.push(currentValue.date);\n      return previousValue;\n    }, []);\n\n  const getNearestDate = () => {\n    const today = new Date();\n    const dates = getDatesFromSavedDiet();\n    const sortedByDiff = [...dates].sort(\n      (a, b) => Math.abs(new Date(a) - today) - Math.abs(new Date(b) - today)\n    );\n\n    return sortedByDiff[0];\n  };\n\n  const nearestDate = getNearestDate()\n    ? new Date(getNearestDate()).toLocaleDateString(\"fr\")\n    : \"Aucune 🤷‍\";\n\n  return (\n    <>\n      <Pie\n        diets={diets}\n        data={getData()}\n        label={({ dataEntry }) =>\n          dataEntry.value > 0\n            ? `${dataEntry.title} : ${Math.round(dataEntry.percentage)}%`\n            : null\n        }\n      />\n\n      <DietForm />\n\n      <div>\n        <p>Nombre de jours : {getDietNumber()}</p>\n        <p>Date la plus proche renseignée : {nearestDate}</p>\n      </div>\n\n      <hr />\n      {user && (\n        <div>\n          <p>Utilisateur: {user.email}</p>\n          <Button onClick={logOut} type=\"submit\" variant=\"outlined\">\n            Se déconnecter\n          </Button>\n        </div>\n      )}\n\n      <hr />\n      <br />\n    </>\n  );\n};\n\nMyQS.propTypes = {};\n\nexport default MyQS;\n","import \"../css/loader.css\";\nimport React from \"react\";\nimport Box from \"@mui/material/Box\";\n\nconst Loading = () => (\n  <div\n    className=\"App\"\n    style={{ maxWidth: \"375px\", margin: \"0 auto\", padding: \"0 10px\" }}\n  >\n    <header style={{ margin: \"20px 0\" }}>\n      {process.env.REACT_APP_WEBSITE_NAME}\n    </header>\n    <div\n      style={{\n        height: \"calc(100vh - 200px)\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n      }}\n    >\n      <div className=\"loading\">\n        <Box component=\"p\">Patiente pendant que la magie opère ✨</Box>\n        <span />\n        <span />\n        <span />\n        <span />\n        <span />\n        <span />\n        <span />\n      </div>\n    </div>\n  </div>\n);\n\nexport default Loading;\n","import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Loading from \"../components/Loading\";\nimport { retrieveDiets } from \"../services/diets\";\nimport { retrieveUser } from \"../services/auth\";\n\nconst GlobalLoader = ({ children }) => {\n  const [isLoading, setLoading] = useState(true);\n  const { loadingDiets } = retrieveDiets();\n  const { loadingUser } = retrieveUser();\n  const shouldShowLoader = loadingUser || loadingDiets;\n\n  useEffect(() => {\n    if (shouldShowLoader) {\n      setTimeout(() => setLoading(true), 500);\n    } else {\n      setTimeout(() => setLoading(false), 500);\n    }\n  }, [setLoading, shouldShowLoader]);\n\n  return isLoading ? <Loading /> : children;\n};\n\nGlobalLoader.propTypes = {\n  children: PropTypes.element.isRequired,\n};\n\nexport default GlobalLoader;\n","// import logo from './logo.svg';\nimport \"./css/App.css\";\nimport React, { useEffect } from \"react\";\nimport Login from \"./components/Login\";\nimport MyQS from \"./components/MyQS\";\nimport { signIn, retrieveUser } from \"./services/auth\";\nimport GlobalLoader from \"./hoc/GlobalLoader\";\n\nfunction App() {\n  const { user } = retrieveUser();\n\n  useEffect(() => signIn());\n\n  return (\n    <GlobalLoader>\n      <div\n        className=\"App\"\n        style={{ maxWidth: \"375px\", margin: \"0 auto\", padding: \"0 10px\" }}\n      >\n        <header style={{ margin: \"20px 0\" }}>\n          {process.env.REACT_APP_WEBSITE_NAME}\n        </header>\n        {user ? <MyQS /> : <Login />}\n      </div>\n    </GlobalLoader>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}